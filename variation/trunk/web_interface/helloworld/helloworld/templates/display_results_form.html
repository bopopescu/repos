<%inherit file="/base.html"/>

<%def name="title()">Select Genome-Wide Association</%def>

<%
GWABaseURL=h.url_for(controller='DisplayResults', action='fetchOne', id=None)
CallInfoBaseURL=h.url_for(controller='DisplayResults', action='fetchCallInfoData', id=None)
PhenotypeHistImageBaseURL=h.url_for(controller='DisplayResults', action='getPhenotypeHistImage', id=None)
CallPhenotypeQQImageBaseURL = h.url_for(controller='DisplayResults', action='getCallPhenotypeQQImage', id=None)
%>

${h.form(h.url_for(), method='get', onsubmit="return handleResponse('%s')"%(GWABaseURL))}
<!-- 2009-3-4 onsubmit argument above is never used cuz this form doesn't have a submit button anymore. -->
<!-- ${h.checkbox('remove_old_plots')} Remove Old Plots<br />	<!-- 2009-1-29 Note: no way to set checkbox default to checked here. do it in the controller's defaults. --> 
Call Method: ${h.select('call_method_id', selected_values=[], options=c.call_method_ls, 
	onchange="SelectChange('%s', ['call_method_id'], 'phenotype_method_id'); return false;"%
		(h.url_for(controller="DisplayResults", action="getPhenotypeMethodLsJson", id=None)),
	required=True )}  <br/>

Phenotype Method: ${h.select('phenotype_method_id', selected_values=[], options=[], 
	onchange="SelectChange('%s', ['call_method_id', 'phenotype_method_id'], 'analysis_method_id'); return false;"%
		(h.url_for(controller="DisplayResults", action="getAnalysisMethodLsJson", id=None)),
	required=True)}  <br />

Analysis Method: ${h.select('analysis_method_id', selected_values=[], options=[], 
	onchange="return handleResponse(['%s', '%s', '%s', '%s', '%s'], ['call_method_id', 'phenotype_method_id', 'analysis_method_id'])"%
		(GWABaseURL, CallInfoBaseURL, PhenotypeHistImageBaseURL, CallPhenotypeQQImageBaseURL, h.GBrowseURLJS),
	required=True)}<br />


${h.hidden('results_id', id='results_id')}
<!-- ${h.submit('submit', 'Submit')} -->
${h.end_form()}

<div id="display_general" style="display:none"></div>

<div id='display_static_plots'>
	<table border=0>
		<tr>
			<td><div id="display_hist_thumb" style="display:none"></div></td>
			<td><div id="display_hist_log_thumb" style="display:none"></div></td>
			<td><div id="display_qq_thumb" style="display:none"></div></td>
			<td><div id="display_qq_log_thumb" style="display:none"></div></td>
		</tr>
	</table>
</div>

<div id='display_gwa'>
<table border=0>
	<tr>
		<td>
		<table border=0>
			% for i in range(5):
					<tr>
						<td><div id="${"display_chr%s"%(i+1)}" style="display:none"></div></td>
					</tr>
			% endfor
		</table>
		</td>
		
		<td style="width: 50%;">
		</td>
		
	</tr>
</table>
</div>

<table border=0>
	<tr>
		<td><div id="phenotype_hist_div" style="display:none"></div></td>
	</tr>
	<tr>
		<td><div id="pca_select_div" style="display:none"></div></td>
	</tr>
	<tr>
		<td><div id="strain_pca_div" style="display:none"></div></td>
		<td><div id="strain_map_div" style="width: 500px; height: 300;"></div></td>
	</tr>
</table>
<div id="strain_motion_chart_div" style="display:none"></div>

<script src="http://ajax.googleapis.com/ajax/libs/yui/2.6.0/build/yahoo-dom-event/yahoo-dom-event.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/yui/2.6.0/build/connection/connection-min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/yui/2.6.0/build/json/json-min.js" type="text/javascript"></script>
<script src="/scripts/form.js"></script>
<script src="/scripts/common.js" type="text/javascript"></script>
<script src="/scripts/display_results_form.js" type="text/javascript"></script>